/************************************************************
 * File: "native-functions.mustache"
 * ---------------------------------
 * Native Function List: automaticated generated by Sidecar
 *
 *  Author: Huan <zixia@zixia.net>
 *  https://github.com/huan/sidecar
 ************************************************************/
{{# nativeFunctionList }}

/**
 * Native Function: {{ name }} / {{ hexAaddress }}
 *  Parameters: {{{ nativeParamTypes }}}
 *  Ret: {{ retType }}
 */
// Huan(202106): which name is better: address, or target?
const {{ name }}_NativeFunction_address = sidecarModuleBaseAddress.add({{ hexAddress }})

const {{ name }}_NativeFunction = new NativeFunction(
  {{ name }}_NativeFunction_address,
  {{{ nativeRetType }}},
  [{{{ nativeParamTypes }}}],
)

function {{ name }}_NativeFunction_wrapper (...args) {
  log.verbose('Agent', '{{ name }}(%s)', args.join(', '))

  {{{ declareNativeArgs }}}

  const ret = {{ name }}_NativeFunction(...{{ nativeArgs }})
  return {{ jsRet }}
}

{{/ nativeFunctionList}}
