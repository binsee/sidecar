/************************************************************
 * Native Function List: automaticated generated by Sidecar
 *  template file: "native-functions.mustache"
 *
 *  Author: Huan <zixia@zixia.net>
 *  https://github.com/huan/sidecar
 ************************************************************/
{{# nativeFunctionList }}

/**
 * Native Function: {{ name }} / {{ target }}
 *  Parameters: {{ parameterTypeList }}
 *  Ret: {{ retType }}
 */
// Huan(202106): which name is better: address, or target?
const {{ name }}_NativeFunction_address = ptr({{ target }})

const {{ name }}_NativeFunction = new NativeFunction(
  {{ name }}_NativeFunction_address,
  {{{ retNativeType }}},
  [{{{ paramNativeTypeList }}}],
)

function {{ name }}_NativeFunction_wrapper (...args) {
  log.verbose('Agent', '{{ name }}(%s)', args.join(', '))

  {{{ declareNativeArgs }}}

  const ret = {{ name }}_NativeFunction(...{{ wrappedNativeArgs }})
  return {{ jsRet }}
}

{{/ nativeFunctionList}}
